import{j as i,a as e,T as u,c as o,s as d,u as w,A as L,V as S,F as z,b as N,d as U,e as O,f as K,g as $,h as se,r as m,D as j,i as H,k as P,l as ne,R as W,m as re}from"./index-a7b55398.js";import{P as q,F as x,D as R,a as g,b as G,C as J,u as V,s as Q,c as Y,S as ae,M as le}from"./index-108f6e21.js";const ce=()=>{const[s]=w({name:["enabled"]});return s?i(z,{children:[e(g.Field,{name:"channel",css:o({marginBottom:d(2)},"",""),children:e(x,{label:i("div",{css:o({display:"flex",gap:d(1)},"",""),children:[e("span",{children:"Канал"}),e(R,{title:"Канал АЦП",description:"Информация о канале. TODO"})]}),options:Object.keys(L).map(t=>({key:t,value:L[t]}))})}),e(g.Field,{name:"vRef",children:e(x,{label:i("div",{css:o({display:"flex",gap:d(1)},"",""),children:[e("span",{children:"Источник опорного напряжения"}),e(R,{title:"Источник опорного напряжения",description:"Информация об источнике опорного напряжения. TODO"})]}),options:[{value:S.INNER,key:"Внутренний"},{value:S.CALIBRATABLE,key:"Настраиваемый"},{value:S.ADC_REF,key:"Внешний вывод ADC_REF"}]})}),e(G,{})]}):null},ie=()=>i("div",{css:o({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:d(1)},"",""),children:[e(g.Field,{name:"enabled",children:e(J,{children:"Включить ADC"})}),e(R,{title:"ADC",description:"Информация об ADC"})]});var oe={name:"huyey5",styles:"min-height:100%;display:grid"},de={name:"14ggdrv",styles:"height:100%;display:flex;flex-direction:column;justify-content:space-between"};const ue=({children:s})=>{const t=V(),n=N(a=>a.analog.adc),r=U({defaultValues:n,mode:"all",resolver:Q(se)});return e("div",{css:oe,children:e(g,{methods:r,onSubmit:a=>{t(O(a)),r.reset(a)},onReset:()=>{t(O(r.getValues())),r.reset()},css:de,children:s})})},fe=()=>{const s=K(),t=N(r=>r.analog.adc),n=V();return e(Y,{onDefaultReset:()=>{n(O($)),s.reset($)},onReset:()=>{s.reset(t)},css:o({padding:d(2),justifyContent:"end"},"","")})},me=()=>i(ue,{children:[i(q,{title:"Настройки ADC",children:[e(ie,{}),i(u,{css:o({marginTop:d(2)},"",""),forceRenderTabPanel:!0,children:[i(u.List,{children:[e(u.Tab,{children:"Настройки"}),e(u.Tab,{children:"Прерывания"})]}),e(u.Panel,{children:e(ce,{})}),e(u.Panel,{children:"Interrupts"})]})]}),e(fe,{})]});var p=(s=>(s.DEC="dec",s.HEX="hex",s.BIN="bin",s))(p||{});const y="0b",v="0x",X=[{key:"Целое",value:p.DEC},{key:"2-чный",value:p.BIN},{key:"16-ричный",value:p.HEX}],pe=[{mask:Number},{mask:"{\\0b}#### #### #### ####",definitions:{"#":/[0-1]/gi}},{mask:"{\\0x}#### ####",definitions:{"#":/[0-9a-f]/gi},prepare:s=>s.toUpperCase()}],M=(s,t)=>{const n=parseInt(s,t);return Number.isNaN(n)?null:n},Z=s=>{if(typeof s=="number")return s;if(typeof s!="string")return null;const t=s.replace(/\s/g,"").trim();return t.startsWith(v)?M(t.replace(v,""),16):t.startsWith(y)?M(t.replace(y,""),2):M(t,10)},ee=(s,t)=>{const n=Z(s);return n===null?null:t===p.BIN?`${y}${n.toString(2)}`:t===p.HEX?`${v}${n.toString(16).toUpperCase()}`:n.toString(10)},he=({initialValue:s,onChange:t,onChangeFormat:n,initialFormat:r=p.DEC})=>{const a=typeof s=="number"?s:null,[k,A]=m.useState(a),f=m.useRef(a),[F,D]=m.useState(r);m.useEffect(()=>{f.current=a,A(a)},[a]),m.useEffect(()=>{D(r)},[r]);const T=ee(f.current,F),C=typeof T=="string"?T:"",[E,_]=m.useState(C),B=m.useCallback(l=>{const c=Z(l);return f.current=c,A(h=>(setTimeout(()=>{h!==c&&(t==null||t(c))},0),c)),t==null||t(c),c},[t]),b=m.useCallback(l=>D(c=>{const h=typeof l=="function"?l(c):l;return setTimeout(()=>{c!==h&&(n==null||n(h))},0),h}),[n]);return{safeMaskValue:C,maskValue:E,setMaskValue:_,decValue:k,format:F,setValue:B,setFormat:b}};var ge={name:"zjik7",styles:"display:flex"};const be=({innerProps:s,Arrow:t,className:n,disabled:r,id:a})=>{const{ref:k,...A}=s;return e("div",{css:ge,children:e("button",{ref:k,type:"button",className:n,disabled:r,id:a,...A,children:t})})},ye=({format:s,onChange:t})=>{const n=m.useRef(null);return e(ae,{Field:be,selected:X.filter(r=>r.value===s),onChange:r=>{var a;t(((a=r.selected)==null?void 0:a.value)||null),setTimeout(()=>{var k;(k=n.current)==null||k.focus()},0)},options:X,popoverPosition:"bottom-end",ref:n,size:"md"})};var ve={name:"d0gv2t",styles:"display:flex;width:100%;align-items:start"};const ke=({Format:s=ye,format:t,error:n,value:r,onChange:a,labelWrap:k,onChangeFormat:A,...f})=>{const{format:F,setFormat:D,setValue:T,maskValue:C,setMaskValue:E,safeMaskValue:_,decValue:B}=he({initialFormat:t,initialValue:r,onChange:a,onChangeFormat:A});r!==void 0&&!a&&console.warn("[IntegerMaskedInput] controlled value doesnt listen to onChange."),t!==void 0&&!A&&console.warn("[IntegerMaskedInput] controlled format doesnt listen to onChangeFormat.");const b=m.useRef(!1);return e("div",{css:ve,children:e(le,{...f,mask:pe,value:C,autoComplete:"off",size:"md",error:n,onBlur:l=>{var c;(c=f==null?void 0:f.onBlur)==null||c.call(f,l),E(_)},rightAddons:e(s,{format:F,isFilled:!!C.length,onChange:l=>{console.log("fmt changed to",l),b.current=!0,D(l),E(ee(B,l)||"")}}),onAccept:l=>{if(b.current){b.current=!1;return}console.log("[IntegerMaskedInput] onAccept setMaskValue=",{newVal:l}),E(l),setTimeout(()=>{l.startsWith(y)&&l.length===y.length||l.startsWith(v)&&l.length===v.length||T(l)},0)},dispatch:(l,c)=>{const h=b.current;b.current&&(b.current=!1);const{value:te}=c,I=te+l;return console.warn("DISPATCH! newVal:",I,"dynamicMasked.compiledMasks=",c.compiledMasks),I.substring(0,y.length)===y?(!h&&I.length>y.length&&D(p.BIN),c.compiledMasks[1]):I.substring(0,v.length)===v?(!h&&I.length>v.length&&D(p.HEX),c.compiledMasks[2]):(!h&&I.length&&D(p.DEC),c.compiledMasks[0])}})})},Ae={[j.CHANNEL_1]:"ЦАП_1",[j.CHANNEL_2]:"ЦАП_2"},De=()=>{const[s]=w({name:["enabled"]});return s?i(z,{children:[e(g.Field,{name:"channel",css:o({marginBottom:d(2)},"",""),children:e(x,{label:i("div",{css:o({display:"flex",gap:d(1)},"",""),children:[e("span",{children:"Канал"}),e(R,{title:"Канал ЦАП",description:"Информация о канале. TODO"})]}),options:Object.values(j).map(t=>({key:Ae[t],value:t}))})}),e(g.Field,{name:"vRef",css:o({marginBottom:d(2)},"",""),children:e(x,{label:i("div",{css:o({display:"flex",gap:d(1)},"",""),children:[e("span",{children:"Источник опорного напряжения"}),e(R,{title:"Источник опорного напряжения",description:"Информация об источнике опорного напряжения. TODO"})]}),options:[{value:S.INNER,key:"Внутренний"},{value:S.CALIBRATABLE,key:"Настраиваемый"},{value:S.ADC_REF,key:"Внешний вывод ADC_REF"}]})}),e(g.Field,{name:"divider",label:"Делитель",children:e(ke,{placeholder:"Вводите 2, 10 или 16-ричное число"})}),e(G,{})]}):null},Ie=()=>i("div",{css:o({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:d(1)},"",""),children:[e(g.Field,{name:"enabled",children:e(J,{children:"Включить DAC"})}),e(R,{title:"DAC",description:"Информация об DAC"})]});var Se={name:"huyey5",styles:"min-height:100%;display:grid"},Re={name:"14ggdrv",styles:"height:100%;display:flex;flex-direction:column;justify-content:space-between"};const Ce=({children:s})=>{const t=V(),n=N(a=>a.analog.dac),r=U({defaultValues:n,mode:"all",resolver:Q(ne),shouldFocusError:!1});return e("div",{css:Se,children:e(g,{methods:r,onSubmit:a=>{t(H(a)),r.reset(a)},onReset:()=>{t(H(r.getValues())),r.reset()},css:Re,children:s})})},Ee=()=>{const s=K(),t=N(r=>r.analog.dac),n=V();return e(Y,{onDefaultReset:()=>{n(H(P)),s.reset(P)},onReset:()=>{s.reset(t)},css:o({padding:d(2),justifyContent:"end"},"","")})},Fe=()=>i(Ce,{children:[i(q,{title:"Настройки DAC",children:[e(Ie,{}),i(u,{css:o({marginTop:d(2)},"",""),forceRenderTabPanel:!0,children:[i(u.List,{children:[e(u.Tab,{children:"Настройки"}),e(u.Tab,{children:"Прерывания"})]}),e(u.Panel,{children:e(De,{})}),e(u.Panel,{children:"Interrupts"})]})]}),e(Ee,{})]}),Ne=()=>i(re,{children:[e(W,{path:"adc",element:e(me,{})}),e(W,{path:"dac",element:e(Fe,{})})]});export{Ne as default};
