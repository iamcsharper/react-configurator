import{a as e,U as A,j as o,c as t,s,f as x,u as I,r as g,W as b,X as E,F as O,b as f,d as S,Y as F,Z as M,T as p,$ as U,a0 as V,a1 as W,a2 as $,a3 as v,a4 as T,a5 as L,R as C,m as N}from"./index-6d15c66d.js";import{P as B,F as u,D as m,a as l,C as h,b as k,u as y,s as j,c as P}from"./index-00f6ce64.js";import{I as D}from"./index-042af8b6.js";import{u as X}from"./usePrevious-afb697e5.js";const K=[{key:"Кастомный",content:e("b",{children:"Кастомный"}),value:"CUSTOM"},...A.map(n=>({key:n,value:n}))],Y=()=>{const n=x(),[a,i]=I({name:["enabled","algorithm"]}),r=i==="CUSTOM",c=X(i),[d,_]=g.useState(!1);return g.useEffect(()=>{if(!d||a===void 0||i===void 0||i===c)return;if(i==="CUSTOM"||!i){n.reset({...b,enabled:a},{keepDirty:!0,keepTouched:!0,keepIsSubmitted:!1,keepDefaultValues:!0});return}const R=i,w=E[R];n.reset({enabled:a,algorithm:R,...w},{keepDirty:!0,keepTouched:!0,keepIsSubmitted:!1,keepDefaultValues:!0})},[i,n,a,c,d]),g.useLayoutEffect(()=>{_(!0)},[]),a?o(O,{children:[e(l.Field,{name:"algorithm",css:t({marginBottom:s(2)},"",""),children:e(u,{label:o("div",{css:t({display:"flex",gap:s(1)},"",""),children:[e("span",{children:"Алгоритм"}),e(m,{title:"Алгоритм CRC",description:"Информация. TODO"})]}),options:K})}),e(l.Field,{name:"poly",label:"Poly",css:t({marginBottom:s(2)},"",""),disabled:!r,children:e(D,{})}),e(l.Field,{name:"init",label:"Init",css:t({marginBottom:s(2)},"",""),disabled:!r,children:e(D,{})}),e(l.Field,{name:"xorOut",label:"XOR out",css:t({marginBottom:s(2)},"",""),disabled:!r,children:e(u,{options:[{key:"0x00000000",value:"0x00000000"},{key:"0xFFFFFFFF",value:"0xFFFFFFFF"}]})}),e(l.Field,{name:"refIn",css:t({marginBottom:s(2)},"",""),disabled:!r,children:e(h,{children:"Ref IN"})}),e(l.Field,{name:"refOut",disabled:!r,children:e(h,{children:"Ref OUT"})}),e(k,{})]}):null},Z=()=>o("div",{css:t({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:s(1)},"",""),children:[e(l.Field,{name:"enabled",children:e(h,{children:"Включить CRC"})}),e(m,{title:"CRC",description:"Информация об CRC"})]});var q={name:"huyey5",styles:"min-height:100%;display:grid"},z={name:"14ggdrv",styles:"height:100%;display:flex;flex-direction:column;justify-content:space-between"};const G=({children:n})=>{const a=y(),i=f(c=>c.crypto.crc),r=S({defaultValues:i,mode:"all",resolver:j(M)});return e("div",{css:q,children:e(l,{methods:r,onSubmit:c=>{a(F(c)),r.reset(c)},onReset:(c,d)=>{d!=null&&d.keepIsSubmitted&&(a(F(r.getValues())),r.reset())},css:z,children:n})})},H=()=>{const n=x(),a=f(r=>r.crypto.crc),i=y();return e(P,{onDefaultReset:()=>{i(F(b)),n.reset(b)},onReset:()=>{n.reset(a)},css:t({padding:s(2),justifyContent:"end"},"","")})},J=()=>o(G,{children:[o(B,{title:"Настройки CRC",children:[e(Z,{}),e("div",{css:t({marginTop:s(2)},"",""),children:e(Y,{})})]}),e(H,{})]}),Q=()=>{const[n]=I({name:["enabled"]});return n?o(O,{children:[e(l.Field,{name:"algorithm",css:t({marginBottom:s(2)},"",""),children:e(u,{label:o("div",{css:t({display:"flex",gap:s(1)},"",""),children:[e("span",{children:"Алгоритм шифрования"}),e(m,{title:"Алгоритм шифрования",description:"Информация. TODO"})]}),options:U})}),e(l.Field,{name:"mode",css:t({marginBottom:s(2)},"",""),children:e(u,{label:o("div",{css:t({display:"flex",gap:s(1)},"",""),children:[e("span",{children:"Режим шифрования"}),e(m,{title:"Режим шифрования",description:"Информация. TODO"})]}),options:V})}),e(l.Field,{name:"permutation",css:t({marginBottom:s(2)},"",""),children:e(u,{label:o("div",{css:t({display:"flex",gap:s(1)},"",""),children:[e("span",{children:"Перестановка слова"}),e(m,{title:"Перестановка слова",description:"Информация. TODO"})]}),options:W})}),e(l.Field,{name:"order",css:t({marginBottom:s(2)},"",""),children:e(u,{label:o("div",{css:t({display:"flex",gap:s(1)},"",""),children:[e("span",{children:"Порядок загрузки/выгрузки"}),e(m,{title:"Порядок загрузки/выгрузки",description:"Информация. TODO"})]}),options:$})}),e(k,{})]}):null},ee=()=>o("div",{css:t({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:s(1)},"",""),children:[e(l.Field,{name:"enabled",children:e(h,{children:"Включить крипто-блок"})}),e(m,{title:"Crypto",description:"Информация об Crypto"})]});var te={name:"huyey5",styles:"min-height:100%;display:grid"},se={name:"14ggdrv",styles:"height:100%;display:flex;flex-direction:column;justify-content:space-between"};const re=({children:n})=>{const a=y(),i=f(c=>c.crypto.crypto),r=S({defaultValues:i,mode:"all",resolver:j(L)});return e("div",{css:te,children:e(l,{methods:r,onSubmit:c=>{a(v(c)),r.reset(c)},onReset:(c,d)=>{d!=null&&d.keepIsSubmitted&&(a(v(r.getValues())),r.reset())},css:se,children:n})})},ne=()=>{const n=x(),a=f(r=>r.crypto.crypto),i=y();return e(P,{onDefaultReset:()=>{i(v(T)),n.reset(T)},onReset:()=>{n.reset(a)},css:t({padding:s(2),justifyContent:"end"},"","")})},ie=()=>o(re,{children:[o(B,{title:"Настройки crypto",children:[e(ee,{}),o(p,{css:t({marginTop:s(2)},"",""),forceRenderTabPanel:!0,children:[o(p.List,{children:[e(p.Tab,{children:"Настройки"}),e(p.Tab,{children:"DMA"})]}),e(p.Panel,{children:e(Q,{})}),e(p.Panel,{children:"В работе"})]})]}),e(ne,{})]}),me=()=>o(N,{children:[e(C,{path:"crc",element:e(J,{})}),e(C,{path:"block",element:e(ie,{})}),e(C,{path:"*",element:e("p",{children:"Work in progress"})})]});export{me as default};
